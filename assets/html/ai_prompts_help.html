<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI機能プロンプト一覧</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        h1 {
            border-bottom: 2px solid #ff69b4;
            padding-bottom: 10px;
            color: #ff1493;
        }
        h2 {
            background-color: #fff0f5;
            padding: 10px;
            border-left: 5px solid #ff69b4;
            margin-top: 30px;
        }
        pre {
            background-color: #2d2d2d;
            color: #ccc;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .feature-desc {
            font-weight: bold;
            color: #555;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <h1>AI機能プロンプト一覧</h1>
    <p>stoxアプリで使用している主要なAI機能のプロンプト構成です。Gemini等への命令文の参考にしてください。</p>

    <section>
        <h2>1. レシピ情報の抽出</h2>
        <p class="feature-desc">機能: テキストやURLから材料名、分量、カテゴリを抽出してリスト化します。</p>
        <pre>以下のレシピ情報のテキストから材料と分量を抽出して、JSON形式で返してください。
「家にある」かどうかは推測せず、statusは "toBuy" (買うべき) にしてください。
分量はできるだけ数値と単位に分解したいですが、難しい場合は文字列のままでも構いません。

出力形式:
[
  {
    "name": "材料名",
    "amount": 数値(推測できない場合は0),
    "unit": "単位(個, g, mlなど。推測できない場合は空文字)",
    "category": "野菜" などのカテゴリ（推測）,
    "status": "toBuy"
  }
]

テキスト:
(ここにレシピのテキストが入ります)</pre>
    </section>

    <section>
        <h2>2. 買い物リスト・在庫リストの解析</h2>
        <p class="feature-desc">機能: 音声認識結果やメモ書きから商品名や数量を抽出します。</p>
        <pre>以下のテキストは、アプリのリスト（買い物リストまたは在庫リスト）に追加したいアイテムのメモ、または音声認識の結果です。
ここから商品名、数量、単位を抽出し、適切なカテゴリを推測してJSON形式で返してください。

【ルール】
1. テキストには「〜を追加して」「〜も買う」「〜がある」などの余計な言葉が含まれる場合がありますが、商品名のみを抽出してください。
2. 数量や単位が明示されていない場合は、amount: 1, unit: "個" としてください。
3. カテゴリは以下のいずれかから推測してください:
   - 野菜・果物
   - 肉・魚
   - 加工品
   - 調味料
   - 飲料
   - 日用品
   - その他
4. 複数のアイテムが含まれている場合は、すべてリストアップしてください（例：「豚肉とキャベツ」→ リスト2件）。

出力形式:
[
  {
    "name": "商品名",
    "amount": 数値,
    "unit": "単位",
    "category": "カテゴリ"
  }
]

テキスト:
(ここにメモや音声テキストが入ります)</pre>
    </section>

    <section>
        <h2>3. 在庫写真の解析</h2>
        <p class="feature-desc">機能: 冷蔵庫などの写真から、中に何があるかをリストアップします。</p>
        <pre>(撮影場所)を撮影した画像です。写真で確認できる食材や商品の名前を解析してリストアップしてください。
出力形式は以下のJSON形式のみを返してください。Markdownのコードブロック(```json ... ```)を含まないでください。

[
  {
    "name": "材料名",
    "amount": 数値(推測できない場合は1),
    "unit": "単位(個, g, mlなど。推測できない場合は個)",
    "category": "野菜" などのカテゴリ（推測）,
    "status": "stock"
  }
]</pre>
    </section>

    <section>
        <h2>4. レシートの解析</h2>
        <p class="feature-desc">機能: 購入品の名前と数量を抽出し、省略された名称を補完します。</p>
        <pre>レシートを撮影した画像です。レシートに記載されている購入品の商品名と数量、価格を読み取ってリストアップしてください。

【重要な指示】
1. 画像内のすべての情報（商品名の前後の記号、棚番、カテゴリコード、価格など）をヒントとして活用してください。
2. レシートの商品名は省略されていることが多いです（例：「ポテトチッ...」「ギュウニュウ 1L」など）。
   これらをそのまま出力せず、前後のコンテキストや一般的な商品知識を用いて、**ユーザーにとって分かりやすい正式な名称**に推測・補完してください。
   （例：「ポテトチッ...」→「ポテトチップス」、「ギュウニュウ」→「牛乳」）
3. 割引や小計、合計、税金などは除外してください。商品のみを抽出してください。

出力形式は以下のJSON形式のみを返してください。Markdownのコードブロック(```json ... ```)を含まないでください。

[
  {
    "name": "補完された正式な商品名",
    "amount": 数値(推測できない場合は1),
    "unit": "単位(個, g, mlなど。推測できない場合は個)",
    "category": "野菜" などのカテゴリ（推測）,
    "status": "stock"
  }
]</pre>
    </section>

    <section>
        <h2>5. 料理写真の栄養素推定</h2>
        <p class="feature-desc">機能: 料理写真からカロリーやPFCバランスを推定し、Markdown形式で解説を出力します。</p>
        <pre>この料理の写真を分析して、カロリーとPFCバランス（タンパク質、脂質、炭水化物）を推定してください。

【重要な指示】
もし写真が料理や食材でない場合、または分析が不可能な場合は、カロリーやPFCは0またはnullにし、
`display_text` には「具体的な料理や食材を特定することはできませんが、この画像は[画像を客観的に見た感想]ですね🫶」という形式で、文末に「🫶」をつけた親しみやすい感想を入れてください。

料理の場合は、以下のMarkdown形式のテキストを `display_text` に生成してください。

## 推定栄養素（1食分）
| 項目 | 推定値 |
| --- | --- |
| 総エネルギー | 約 〇〇 kcal |
...

## 内訳の目安
- 料理名（約 ◯◯ kcal）
  - 材料名（分量目安）： 解説
...

## 分析コメント
  分析コメントを表示

出力は以下のJSON形式のみを返してください。Markdownのコードブロックを含めないでください。</pre>
    </section>

    <section>
        <h2>6. 献立の提案</h2>
        <p class="feature-desc">機能: 在庫状況や前後の食事を考慮して、3パターンの献立を提案します。</p>
        <pre>あなたはプロの栄養士でシェフです。
(日付)の「(朝食/昼食/夕食)」の献立を提案してください。

【コンテキスト】
(前後の食事情報)

【今の状況】
- 冷蔵庫にあるもの（在庫）: (在庫リスト)
- 買い物リストにあるもの: (買い物リスト)

【依頼】
以下の3つのパターンの献立を提案してください。
1. **バランス重視**: 前後の食事とのバランスを最優先した提案。
2. **在庫活用**: 「冷蔵庫にあるもの」を優先的に使った提案。
3. **買い出し活用**: 「買い物リストにあるもの」も組み合わせた提案。

【出力形式】
JSON配列形式のみで返してください。</pre>
    </section>
</body>
</html>
